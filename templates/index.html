<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="robots" content="noindex, nofollow">
    <meta name="googlebot" content="noindex, nofollow">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.js"></script>


    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.css">


    <style type="text/css">
        #map {
            height: 500px;
            width: 80%;
        }
    </style>

    <title>мапа</title>


    <script type="text/javascript">
        window.onload = function () {
            try {
                // We’ll add a tile layer to add to our map, in this case it’s a OSM tile layer.
                // Creating a tile layer usually involves setting the URL template for the tile images
                var osmUrl = 'https://{s}.tile.thunderforest.com/landscape/{z}/{x}/{y}.png?apikey=2996301b162b4c85910c10d2815529ce ',
                    osmAttrib = '&copy; <a href="http://openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                    osm = L.tileLayer(osmUrl, {
                        maxZoom: 18,
                        attribution: osmAttrib
                    });

                var map = L.map('map').setView([19.04469, 72.9258], 12).addLayer(osm);
            } catch (e) {
                alert(e);
            }

            function onEachFeature(feature, layer) {
                var popupContent = "<p></p>";

                if (feature.properties && feature.properties.Message) {
                    popupContent += feature.properties.Message;
                }

                layer.bindPopup(popupContent);
            }

            fetch("https://v.shashkovs.ru/findmespot/get_waypoints?trip_name=trip2")
                .then((response) => {
                    return response.json();
                })
                .then((json) => {
                    for (var i of json.return.features) {
                        L.geoJSON(i, {onEachFeature: onEachFeature}).addTo(map);
                    }
                })
                .catch((err) => {
                    alert(err)
                })
        }

    </script>


</head>

<body>
<div id="map"></div>

<script>
    // tell the embed parent frame the height of the content
    if (window.parent && window.parent.parent) {
        window.parent.parent.postMessage(["resultsFrame", {
            height: document.body.getBoundingClientRect().height,
            slug: "LnzN2"
        }], "*")
    }
</script>

</body>

</html>


